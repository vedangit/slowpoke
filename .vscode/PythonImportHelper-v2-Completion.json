[
    {
        "label": "Flask",
        "importPath": "flask",
        "description": "flask",
        "isExtraImport": true,
        "detail": "flask",
        "documentation": {}
    },
    {
        "label": "request",
        "importPath": "flask",
        "description": "flask",
        "isExtraImport": true,
        "detail": "flask",
        "documentation": {}
    },
    {
        "label": "g",
        "importPath": "flask",
        "description": "flask",
        "isExtraImport": true,
        "detail": "flask",
        "documentation": {}
    },
    {
        "label": "request",
        "importPath": "flask",
        "description": "flask",
        "isExtraImport": true,
        "detail": "flask",
        "documentation": {}
    },
    {
        "label": "Flask",
        "importPath": "flask",
        "description": "flask",
        "isExtraImport": true,
        "detail": "flask",
        "documentation": {}
    },
    {
        "label": "monitor",
        "importPath": "slowpoke",
        "description": "slowpoke",
        "isExtraImport": true,
        "detail": "slowpoke",
        "documentation": {}
    },
    {
        "label": "sys",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "sys",
        "description": "sys",
        "detail": "sys",
        "documentation": {}
    },
    {
        "label": "json",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "json",
        "description": "json",
        "detail": "json",
        "documentation": {}
    },
    {
        "label": "Path",
        "importPath": "pathlib",
        "description": "pathlib",
        "isExtraImport": true,
        "detail": "pathlib",
        "documentation": {}
    },
    {
        "label": "Path",
        "importPath": "pathlib",
        "description": "pathlib",
        "isExtraImport": true,
        "detail": "pathlib",
        "documentation": {}
    },
    {
        "label": "Path",
        "importPath": "pathlib",
        "description": "pathlib",
        "isExtraImport": true,
        "detail": "pathlib",
        "documentation": {}
    },
    {
        "label": "Path",
        "importPath": "pathlib",
        "description": "pathlib",
        "isExtraImport": true,
        "detail": "pathlib",
        "documentation": {}
    },
    {
        "label": "Path",
        "importPath": "pathlib",
        "description": "pathlib",
        "isExtraImport": true,
        "detail": "pathlib",
        "documentation": {}
    },
    {
        "label": "time",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "time",
        "description": "time",
        "detail": "time",
        "documentation": {}
    },
    {
        "label": "os",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "os",
        "description": "os",
        "detail": "os",
        "documentation": {}
    },
    {
        "label": "datetime",
        "importPath": "datetime",
        "description": "datetime",
        "isExtraImport": true,
        "detail": "datetime",
        "documentation": {}
    },
    {
        "label": "subprocess",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "subprocess",
        "description": "subprocess",
        "detail": "subprocess",
        "documentation": {}
    },
    {
        "label": "LOG_FILE",
        "importPath": "slowpoke.logger",
        "description": "slowpoke.logger",
        "isExtraImport": true,
        "detail": "slowpoke.logger",
        "documentation": {}
    },
    {
        "label": "log_slow_request",
        "importPath": "slowpoke.logger",
        "description": "slowpoke.logger",
        "isExtraImport": true,
        "detail": "slowpoke.logger",
        "documentation": {}
    },
    {
        "label": "patch",
        "importPath": "unittest.mock",
        "description": "unittest.mock",
        "isExtraImport": true,
        "detail": "unittest.mock",
        "documentation": {}
    },
    {
        "label": "get_config",
        "importPath": "slowpoke.config",
        "description": "slowpoke.config",
        "isExtraImport": true,
        "detail": "slowpoke.config",
        "documentation": {}
    },
    {
        "label": "monitor",
        "importPath": "slowpoke.core",
        "description": "slowpoke.core",
        "isExtraImport": true,
        "detail": "slowpoke.core",
        "documentation": {}
    },
    {
        "label": "fast",
        "kind": 2,
        "importPath": "examples.app",
        "description": "examples.app",
        "peekOfCode": "def fast():\n    return \"Fast route\"\n@app.route(\"/slow\")\ndef slow():\n    import time; time.sleep(1.5)\n    return \"Slow route\"\nif __name__ == \"__main__\":\n    app.run(debug=True)",
        "detail": "examples.app",
        "documentation": {}
    },
    {
        "label": "slow",
        "kind": 2,
        "importPath": "examples.app",
        "description": "examples.app",
        "peekOfCode": "def slow():\n    import time; time.sleep(1.5)\n    return \"Slow route\"\nif __name__ == \"__main__\":\n    app.run(debug=True)",
        "detail": "examples.app",
        "documentation": {}
    },
    {
        "label": "app",
        "kind": 5,
        "importPath": "examples.app",
        "description": "examples.app",
        "peekOfCode": "app = Flask(__name__)\nmonitor(app)\n@app.route(\"/\")\ndef fast():\n    return \"Fast route\"\n@app.route(\"/slow\")\ndef slow():\n    import time; time.sleep(1.5)\n    return \"Slow route\"\nif __name__ == \"__main__\":",
        "detail": "examples.app",
        "documentation": {}
    },
    {
        "label": "report",
        "kind": 2,
        "importPath": "slowpoke.cli",
        "description": "slowpoke.cli",
        "peekOfCode": "def report():\n    try:\n        with open(LOG_FILE, \"r\") as f:\n            logs = f.readlines()\n            if not logs:\n                print(\"No slow requests logged yet.\")\n            for line in logs:\n                print(line.strip())\n    except FileNotFoundError:\n        print(\"Log file not found.\")",
        "detail": "slowpoke.cli",
        "documentation": {}
    },
    {
        "label": "main",
        "kind": 2,
        "importPath": "slowpoke.cli",
        "description": "slowpoke.cli",
        "peekOfCode": "def main():\n    if len(sys.argv) > 1 and sys.argv[1] == \"report\":\n        report()\n    else:\n        print(\"Usage: slowpoke report\")",
        "detail": "slowpoke.cli",
        "documentation": {}
    },
    {
        "label": "get_config",
        "kind": 2,
        "importPath": "slowpoke.config",
        "description": "slowpoke.config",
        "peekOfCode": "def get_config():\n    if CONFIG_FILE.exists():\n        try:\n            with open(CONFIG_FILE, \"r\") as f:\n                return json.load(f)\n        except:\n            return DEFAULT_CONFIG\n    return DEFAULT_CONFIG",
        "detail": "slowpoke.config",
        "documentation": {}
    },
    {
        "label": "CONFIG_FILE",
        "kind": 5,
        "importPath": "slowpoke.config",
        "description": "slowpoke.config",
        "peekOfCode": "CONFIG_FILE = Path.home() / \".slowpoke\" / \"config.json\"\nDEFAULT_CONFIG = {\n    \"threshold_ms\": 100\n}\ndef get_config():\n    if CONFIG_FILE.exists():\n        try:\n            with open(CONFIG_FILE, \"r\") as f:\n                return json.load(f)\n        except:",
        "detail": "slowpoke.config",
        "documentation": {}
    },
    {
        "label": "DEFAULT_CONFIG",
        "kind": 5,
        "importPath": "slowpoke.config",
        "description": "slowpoke.config",
        "peekOfCode": "DEFAULT_CONFIG = {\n    \"threshold_ms\": 100\n}\ndef get_config():\n    if CONFIG_FILE.exists():\n        try:\n            with open(CONFIG_FILE, \"r\") as f:\n                return json.load(f)\n        except:\n            return DEFAULT_CONFIG",
        "detail": "slowpoke.config",
        "documentation": {}
    },
    {
        "label": "monitor",
        "kind": 2,
        "importPath": "slowpoke.core",
        "description": "slowpoke.core",
        "peekOfCode": "def monitor(app):\n    config = get_config()\n    threshold_ms = config.get(\"threshold_ms\", 100)\n    @app.before_request\n    def _before_request():\n        request._slowpoke_start= time.time()\n    @app.after_request\n    def _after_request(response):\n        start = getattr(request, '_slowpoke_start', None)\n        if start:",
        "detail": "slowpoke.core",
        "documentation": {}
    },
    {
        "label": "log_slow_request",
        "kind": 2,
        "importPath": "slowpoke.logger",
        "description": "slowpoke.logger",
        "peekOfCode": "def log_slow_request(request, response, duration):\n    LOG_DIR.mkdir(parents=True, exist_ok=True)\n    log_entry = {\n        \"timestamp\": datetime.now().isoformat(),\n        \"method\": request.method,\n        \"route\": request.path,\n        \"status_code\": response.status_code,\n        \"duration_ms\": round(duration, 2)\n    }\n    with open(LOG_FILE, \"a\") as f:",
        "detail": "slowpoke.logger",
        "documentation": {}
    },
    {
        "label": "LOG_DIR",
        "kind": 5,
        "importPath": "slowpoke.logger",
        "description": "slowpoke.logger",
        "peekOfCode": "LOG_DIR = Path.home() /'.slowpoke' / 'logs'\nLOG_FILE = LOG_DIR / 'slowpoke.log'\ndef log_slow_request(request, response, duration):\n    LOG_DIR.mkdir(parents=True, exist_ok=True)\n    log_entry = {\n        \"timestamp\": datetime.now().isoformat(),\n        \"method\": request.method,\n        \"route\": request.path,\n        \"status_code\": response.status_code,\n        \"duration_ms\": round(duration, 2)",
        "detail": "slowpoke.logger",
        "documentation": {}
    },
    {
        "label": "LOG_FILE",
        "kind": 5,
        "importPath": "slowpoke.logger",
        "description": "slowpoke.logger",
        "peekOfCode": "LOG_FILE = LOG_DIR / 'slowpoke.log'\ndef log_slow_request(request, response, duration):\n    LOG_DIR.mkdir(parents=True, exist_ok=True)\n    log_entry = {\n        \"timestamp\": datetime.now().isoformat(),\n        \"method\": request.method,\n        \"route\": request.path,\n        \"status_code\": response.status_code,\n        \"duration_ms\": round(duration, 2)\n    }",
        "detail": "slowpoke.logger",
        "documentation": {}
    },
    {
        "label": "test_cli_report",
        "kind": 2,
        "importPath": "tests.test_cli",
        "description": "tests.test_cli",
        "peekOfCode": "def test_cli_report(tmp_path, monkeypatch, capsys):\n    log_path = tmp_path / \"slowpoke.log\"\n    monkeypatch.setattr(\"slowpoke.logger.LOG_FILE\", log_path)\n    monkeypatch.setattr(\"slowpoke.logger.LOG_DIR\", tmp_path)\n    # Create a dummy log entry\n    log_path.write_text('{\"method\": \"GET\", \"route\": \"/\", \"status_code\": 200, \"duration_ms\": 150}\\n')\n    from slowpoke.cli import report\n    report()\n    out = capsys.readouterr().out\n    assert \"GET\" in out",
        "detail": "tests.test_cli",
        "documentation": {}
    },
    {
        "label": "test_default_config",
        "kind": 2,
        "importPath": "tests.test_config",
        "description": "tests.test_config",
        "peekOfCode": "def test_default_config():\n    # Simulate config file not existing\n    with patch(\"pathlib.Path.exists\", return_value=False):\n        config = get_config()\n        assert config[\"threshold_ms\"] == 100",
        "detail": "tests.test_config",
        "documentation": {}
    },
    {
        "label": "test_monitor_logs_slow_request",
        "kind": 2,
        "importPath": "tests.test_core",
        "description": "tests.test_core",
        "peekOfCode": "def test_monitor_logs_slow_request(tmp_path, monkeypatch):\n    fake_log_file = tmp_path / \"slowpoke.log\"\n    monkeypatch.setattr(\"slowpoke.logger.LOG_FILE\", fake_log_file)\n    monkeypatch.setattr(\"slowpoke.logger.LOG_DIR\", tmp_path)\n    app = Flask(__name__)\n    monitor(app)\n    @app.route(\"/slow\")\n    def slow():\n        time.sleep(0.15)  # 150ms > 100ms default threshold\n        return \"slow response\"",
        "detail": "tests.test_core",
        "documentation": {}
    },
    {
        "label": "DummyRequest",
        "kind": 6,
        "importPath": "tests.test_logger",
        "description": "tests.test_logger",
        "peekOfCode": "class DummyRequest:\n    method = \"POST\"\n    path = \"/submit\"\nclass DummyResponse:\n    status_code = 201\ndef test_log_slow_request(tmp_path, monkeypatch):\n    fake_log_file = tmp_path / \"slowpoke.log\"\n    fake_log_dir = fake_log_file.parent\n    monkeypatch.setattr(\"slowpoke.logger.LOG_FILE\", fake_log_file)\n    monkeypatch.setattr(\"slowpoke.logger.LOG_DIR\", fake_log_dir)",
        "detail": "tests.test_logger",
        "documentation": {}
    },
    {
        "label": "DummyResponse",
        "kind": 6,
        "importPath": "tests.test_logger",
        "description": "tests.test_logger",
        "peekOfCode": "class DummyResponse:\n    status_code = 201\ndef test_log_slow_request(tmp_path, monkeypatch):\n    fake_log_file = tmp_path / \"slowpoke.log\"\n    fake_log_dir = fake_log_file.parent\n    monkeypatch.setattr(\"slowpoke.logger.LOG_FILE\", fake_log_file)\n    monkeypatch.setattr(\"slowpoke.logger.LOG_DIR\", fake_log_dir)\n    log_slow_request(DummyRequest(), DummyResponse(), 123.45)\n    assert fake_log_file.exists()\n    logs = fake_log_file.read_text().strip().split(\"\\n\")",
        "detail": "tests.test_logger",
        "documentation": {}
    },
    {
        "label": "test_log_slow_request",
        "kind": 2,
        "importPath": "tests.test_logger",
        "description": "tests.test_logger",
        "peekOfCode": "def test_log_slow_request(tmp_path, monkeypatch):\n    fake_log_file = tmp_path / \"slowpoke.log\"\n    fake_log_dir = fake_log_file.parent\n    monkeypatch.setattr(\"slowpoke.logger.LOG_FILE\", fake_log_file)\n    monkeypatch.setattr(\"slowpoke.logger.LOG_DIR\", fake_log_dir)\n    log_slow_request(DummyRequest(), DummyResponse(), 123.45)\n    assert fake_log_file.exists()\n    logs = fake_log_file.read_text().strip().split(\"\\n\")\n    assert len(logs) == 1\n    entry = json.loads(logs[0])",
        "detail": "tests.test_logger",
        "documentation": {}
    }
]